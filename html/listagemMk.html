<style>
	#tabela1 td:nth-child(1) {
		text-align: left;
		width: auto;
		max-width: 100px;
	}
	#tabela1 td:nth-child(2) {
		--w: 13%;
		width: var(--w);
		min-width: var(--w);
		max-width: var(--w);
	}
	#tabela1 td:nth-child(3) {
		--w: 13%;
		width: var(--w);
		min-width: var(--w);
		max-width: var(--w);
	}
	#tabela1 td:nth-child(4) {
		--w: 13%;
		width: var(--w);
		min-width: var(--w);
		max-width: var(--w);
		text-align: right;
	}
	#tabela1 td:nth-child(5) {
		--w: 8%;
		width: var(--w);
		min-width: var(--w);
		max-width: var(--w);
	}
	#tabela1 td:nth-child(6) {
		--w: 8%;
		width: var(--w);
		min-width: var(--w);
		max-width: var(--w);
		cursor: pointer;
	}
	#tabela1 td:nth-child(7) {
		--w: 8%;
		width: var(--w);
		min-width: var(--w);
		max-width: var(--w);
		cursor: pointer;
	}

	#tabela2 td:nth-child(1) {
		text-align: left;
		width: auto;
		max-width: 100px;
	}
	#tabela2 td:nth-child(2) {
		--w: 6%;
		width: var(--w);
		min-width: var(--w);
		max-width: var(--w);
	}
	#tabela2 td:nth-child(3) {
		--w: 8%;
		width: var(--w);
		min-width: var(--w);
		max-width: var(--w);
	}
	#tabela2 td:nth-child(4) {
		--w: 8%;
		width: var(--w);
		min-width: var(--w);
		max-width: var(--w);
	}
</style>

<h1 class="microPos2 h1">Listagem Instanciável</h1>
<div>
	Listagem de dados em tabela. A classe pode instanciar mais de uma tabela.
	Ordenamento, resumo e páginas individuais. O Filtro pode ou não ser
	individual.
</div>
<br />
<!-- LISTAGEM 1 -->
<div class="bordaDupla pad5">
	<h2>LISTAGEM 1:</h2>
	<div>Instancia: lista. Container: listas[0].</div>
	<div class="divListagemContainer" id="tabela1">
		<div class="divListagem">
			<table class="tableListagem">
				<thead>
					<tr>
						<th class="sort-mNome">Usuário</th>
						<th class="sort-mDataCadastro">Data Cadastro</th>
						<th class="sort-mDataUltimoAcesso">Último Acesso</th>
						<th class="sort-mTotalAcessos">Tot. Acessos</th>
						<th class="sort-mStatus">Status</th>
						<th class="acao">Editar</th>
						<th class="acao">Deletar</th>
					</tr>
				</thead>
				<tbody class="listBody"></tbody>
			</table>
		</div>
		<div class="tableResumo" mkImportar="/html/_resumoListaNovo.html"></div>
	</div>
	<br />
	<div class="iComGap">
		<div class="col30">
			<div class="i">
				<div class="col60">Filtro Usuário:</div>
				<div class="col40">
					<input
						name="mNome"
						class="iConsultas"
						data-mkfformato="string"
						placeholder="Nome do Usuario"
						value=""
					/>
				</div>
			</div>
		</div>
		<div class="col20">
			<div class="i microPos6">
				<button onclick="uiGetADD(0,'Listagem 1')">Adicionar</button>
			</div>
		</div>
		<div class="col20">
			<div class="i microPos4">
				<button onclick="uiClearFiltro(0)">Limpar Filtros</button>
			</div>
		</div>
		<div class="col20">
			<div class="i">
				<input
					type="search"
					name="mkFullFiltro"
					class="iConsultas"
					placeholder="Filtro Geral Listagem 1"
				/>
			</div>
		</div>
	</div>
</div>
<br />

<!-- LISTAGEM 2 -->
<div class="bordaDupla pad5">
	<h2>LISTAGEM 2:</h2>
	<div>Instancia: lista2. Container: listas[1].</div>
	<div class="divListagemContainer" id="tabela2">
		<div class="divListagem">
			<table class="tableListagem">
				<thead>
					<tr>
						<th class="sort-mNome">Usuário</th>
						<th class="sort-mStatus">Status</th>
						<th class="acao">Editar</th>
						<th class="acao">Deletar</th>
					</tr>
				</thead>
				<tbody class="listBody"></tbody>
			</table>
		</div>
		<div class="tableResumo" mkImportar="/html/_resumoListaNovo.html"></div>
	</div>
	<br />
	<div class="iComGap">
		<div class="col30">
			<div class="i">
				<div class="col60">Filtro Usuário:</div>
				<div class="col40">
					<input
						name="mNome"
						class="fTabela2"
						data-mkfformato="string"
						placeholder="Nome do Usuario"
						value="a"
					/>
				</div>
			</div>
		</div>
		<div class="col20">
			<div class="i microPos6">
				<button onclick="uiGetADD(1,'Listagem 2')">Adicionar</button>
			</div>
		</div>
		<div class="col20">
			<div class="i microPos4">
				<button onclick="uiClearFiltro(1)">Limpar Filtros</button>
			</div>
		</div>
		<div class="col20">
			<input
				type="search"
				name="mkFullFiltro"
				class="fTabela2"
				placeholder="Filtro Geral Listagem 2"
			/>
		</div>
	</div>
</div>

<!-- AREA DE ADICIONAR E EDITAR -->
<br />
<div class="i">
	<div class="j microPos2">
		<div id="Acao" class="operacaoContainer oculto">
			<div class="operacaoTitulo">ADD</div>
			<form class="operacaoCampos"></form>
			<div class="iComGap">
				<div class="j microPos8">
					<button class="operacaoAcao">ADD</button>
				</div>
			</div>
		</div>
	</div>
</div>

<br /><br />
<div class="fullCodigoContainer microPos5">
	<div class="i codigoContainer">
		<div class="titulo">Modo de uso:</div>
		<textarea class="regua" rows="40" cols="1" readonly>
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40</textarea
		>
		<textarea
			class="codigo"
			rows="40"
			cols="100"
			onfocus="mk.mkSelecionarInner(this)"
			readonly
		>
//urlOrigem,todaListagem,idModelo,filtro,pk,aoReceberDados,antesDePopularTabela,aoCompletarExibicao
var lista2 = new mk("/GetList2", "#tabela2", "#modelo2", ".fTabela2", "mId");
// lista2        = Nome da variável que receberá a lista. Por ela se executará os métodos.
// new mk        = Inicia a contrução da classe, onde você deve passar os parametros.
// *urlOrigem    = URL dos dados. Padrão: ("/GetList")
// *todaListagem = Id/Classe da Tag que contém a tabela e o resumo (".divListagemContainer")
// *idModelo     = Id/Classe da Tag que contém o template ("#modelo")
// filtro        = Classe de tags que filtram esta listagem. Apenas Inputs. (".iConsultas")
// pk            = Primary Key. Necessário identificador único para efetuar CRUD na listagem.
// aoReceberDados = Função que se executa sempre que esta listagem coletar dados externos.
// antesDePopularTabela = Função que se executa momentos antes de exibir algo.
// aoCompletarExibicao = Função que se executa somente após concluir a exibição.
var listas = [lista, lista2];
// Você pode colocar as instâncias em um container, como na linha acima.
// Desta forma você pode chamar a instância correta na função correta.

// CRUD: (Usa-se: instancia.Acao() )
// UI para Adicionar (ex.: lista.add(objeto))
var uiSetADD = async (listId) => {
  let obj = mk.mkGerarObjeto(".operacaoCampos");
  listas[listId].add(obj);
  mk.QverOff(".operacaoContainer");
};
// UI para Editar (ex.: lista.edit(objeto, PropriedadeABuscar, ValorDaPropriedade))
var uiSetEDIT = async (k, v, listId) => {
  let obj = mk.mkGerarObjeto(".operacaoCampos");
  listas[listId].edit(obj, k, v);
  mk.QverOff(".operacaoContainer");
};
// UI para Deletar (ex.: lista.del(PropriedadeABuscar, ValorDaPropriedade))
var uiSetDEL = async (k, v, listId) => {
  listas[listId].del(k, v);
  mk.QverOff(".operacaoContainer");
};
// UI para Limpar Filtros (ex.: lista.clearFiltro())
var uiClearFiltro = async (listId) => {
  listas[listId].clearFiltro();
  mk.QverOff(".operacaoContainer");
};
</textarea
		>
	</div>
</div>
<br /><br />
<!-- TEMPLATE LISTAGEM 1 -->
<script type="text/html" id="modelo">
	<tr id="${mId}" k="mId">
		<td class="sort-mNome">${mNome}</td>
		<td class="sort-mDataCadastro">
			<input type="date" value="${mDataCadastro}" />
		</td>
		<td class="sort-mDataUltimoAcesso">${mDataUltimoAcesso}</td>
		<td class="sort-mTotalAcessos">${mTotalAcessos}</td>
		<td class="sort-mStatus ${mStatus}"></td>
		<td class="acao">
			<a onclick="uiGetEDIT(mk.getTr(this),0);">EDIT</a>
		</td>
		<td class="acao">
			<a onclick="uiGetDEL(mk.getTr(this),0);">DEL</a>
		</td>
	</tr>
</script>

<!-- TEMPLATE LISTAGEM 2 -->
<script type="text/html" id="modelo2">
	<tr id="${mId}" k="mId">
		<td class="sort-mNome">${mNome}</td>
		<td class="sort-mStatus ${mStatus}"></td>
		<td class="acao">
			<a onclick="uiGetEDIT(mk.getTr(this),1);">EDIT</a>
		</td>
		<td class="acao">
			<a onclick="uiGetDEL(mk.getTr(this),1);">DEL</a>
		</td>
	</tr>
</script>

<!-- TEMPLATE DE ADICIONAR E EDITAR -->
<script type="text/html" id="modeloOperacao">
	<div class="iComGap">
		<div class="j" style="text-align: right;">${k}</div>
		<div class="j"><input name="${k}" class="" value="${v}" /></div>
	</div>
</script>

<script src="/js/listagemMk.js"></script>
